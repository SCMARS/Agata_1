# ü§ñ Agatha ‚Äî AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω —Å –ø–∞–º—è—Ç—å—é

AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω —Å LangGraph, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <repo-url>
cd Agata

# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ .\\venv\\Scripts\\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 2. API –∫–ª—é—á–∏

–ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏:
- OpenAI: https://platform.openai.com/api-keys
- Telegram: @BotFather –≤ Telegram

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ `config.env`:
```bash
OPENAI_API_KEY=sk-proj-–≤–∞—à-–∫–ª—é—á-–∑–¥–µ—Å—å
TELEGRAM_BOT_TOKEN=–≤–∞—à-—Ç–æ–∫–µ–Ω-–∑–¥–µ—Å—å
HOST=0.0.0.0
PORT=8000
API_PORT=8000
LLM_MODEL=gpt-4o-mini
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

**–ü–ï–†–í–´–ô –ó–ê–ü–£–°–ö (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑):**
```bash
cd Agata
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

**–ö–ê–ñ–î–´–ô –ü–û–°–õ–ï–î–£–Æ–©–ò–ô –ó–ê–ü–£–°–ö:**
```bash
cd Agata
source venv/bin/activate

# –¢–µ—Ä–º–∏–Ω–∞–ª 1 - –∑–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä –ü–ï–†–í–´–ú
python3 run_server.py

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 - –∑–∞–ø—É—Å—Ç–∏—Ç—å Telegram –±–æ—Ç–∞ –í–¢–û–†–´–ú  
python3 run_telegram_bot.py
```

**–ü—Ä–æ—Å—Ç—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏):**
```bash
./start_api.sh    # –ó–∞–ø—É—Å–∫ API
./start_bot.sh    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl http://localhost:8001/healthz

# –¢–µ—Å—Ç —á–∞—Ç–∞
curl -X POST http://localhost:8001/api/chat \
  -H "Content-Type: application/json" \
  -d '{"user_id":"test","messages":[{"role":"user","content":"–ü—Ä–∏–≤–µ—Ç"}]}'
```

## üîß –ß—Ç–æ —É–º–µ–µ—Ç

- –ü–æ–º–Ω–∏—Ç –≤–∞—à–µ –∏–º—è –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã
- 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–æ–≤–µ–¥–µ–Ω–∏—è (–æ—Ç –∑–∞–≥–∞–¥–æ—á–Ω–æ–π –¥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–π)
- –≠—Ç–∞–ø—ã —Ä–∞–∑–≤–∏—Ç–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π (–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ ‚Üí —Ä–∞–∑–≤–∏—Ç–∏–µ ‚Üí —É–≥–ª—É–±–ª–µ–Ω–∏–µ)
- –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤—ã –≤ –æ–±—â–µ–Ω–∏–∏
- Telegram –±–æ—Ç + REST API

## üêõ –ü—Ä–æ–±–ª–µ–º—ã

**ModuleNotFoundError: No module named 'flask'**
```bash
# –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤–æ–µ venv! –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ:
source venv/bin/activate
# –ï—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
pip install -r requirements.txt
```

**Telegram –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "All connection attempts failed":**
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8000:
lsof -ti:8000 | xargs kill -9

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API —Å–µ—Ä–≤–µ—Ä:
source venv/bin/activate
python3 run_server.py

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç:
curl http://localhost:8000/healthz

# 4. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, Telegram –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è
```

**–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç:**
```bash
lsof -ti:8000 | xargs kill -9
```

**–ù–µ—Ç –∫–ª—é—á–µ–π:**
```bash
export OPENAI_API_KEY="sk-proj-–≤–∞—à-–∫–ª—é—á"
export TELEGRAM_BOT_TOKEN="–≤–∞—à-—Ç–æ–∫–µ–Ω"
```

**–ë–æ—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ API:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 8000
curl http://localhost:8000/healthz
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ api/main.py          # Flask API
‚îú‚îÄ‚îÄ bots/telegram_bot.py # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ graph/pipeline.py    # LangGraph –ø–∞–π–ø–ª–∞–π–Ω
‚îú‚îÄ‚îÄ memory/              # –°–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏
‚îî‚îÄ‚îÄ utils/               # –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

agata_prompt_data/       # –õ–∏—á–Ω–æ—Å—Ç—å –ê–≥–∞—Ç—ã
config.env              # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

–í—Å—ë. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å! üöÄ