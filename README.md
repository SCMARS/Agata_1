# ü§ñ Agatha ‚Äî AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω —Å –ø–∞–º—è—Ç—å—é –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º

–ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫, –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. Agatha –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤—ã, –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç —Å—Ç–∏–ª—å –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤–µ–¥—ë—Ç –¥–∏–∞–ª–æ–≥ –ø–æ —ç—Ç–∞–ø–∞–º (–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ ‚Üí —Ä–∞–∑–≤–∏—Ç–∏–µ ‚Üí —É–≥–ª—É–±–ª–µ–Ω–∏–µ).

## –ß—Ç–æ —É–º–µ–µ—Ç
- –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (—Ñ–∞–∫—Ç—ã –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ), –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (–±—É—Ñ–µ—Ä), —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ: –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é (–¢—É—Ä–±–æ—Ç–ª–∏–≤–∞, –°—Ç—Ä–∏–º–∞–Ω–∞, –ó–∞–≥–∞–¥–∫–æ–≤–∞, –ì—Ä–∞–π–ª–∏–≤–∞, –ü—ñ–¥—Ç—Ä–∏–º—É—é—á–∞) –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º:
  - –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
  - —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å
  - –ø–æ–≤—Ç–æ—Ä —Ç–µ–º
  - –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–≤–æ–ø—Ä–æ—Å—ã, –∏—Å—Ç–æ—Ä–∏–∏, –ø—Ä–æ—Å—å–±–∞ —Å–æ–≤–µ—Ç–∞)
- –≠—Ç–∞–ø—ã –æ–±—â–µ–Ω–∏—è: 1‚Äì5 (–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ), 5‚Äì15 (—Ä–∞–∑–≤–∏—Ç–∏–µ), 15+ (—É–≥–ª—É–±–ª–µ–Ω–∏–µ)
- –†–µ–∞–∫—Ü–∏—è –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤—ã: ¬´–¢—ã –Ω–µ –ø–∏—Å–∞–ª N –¥–µ–Ω—å/–¥–Ω—è/–¥–Ω–µ–π‚Ä¶¬ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–∫–ª–æ–Ω–µ–Ω–∏–µ–º
- –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–æ–ø—Ä–æ—Å–æ–≤: —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥–æ–µ 3‚Äë–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
python -m venv venv
source venv/bin/activate  # macOS/Linux
pip install -r requirements.txt
```

2) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
export OPENAI_API_KEY="<–≤–∞—à OpenAI –∫–ª—é—á>"
# (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Telegram –±–æ—Ç
export TELEGRAM_BOT_TOKEN="<—Ç–æ–∫–µ–Ω –±–æ—Ç–∞>"
```

3) –ó–∞–ø—É—Å—Ç–∏—Ç–µ API
```bash
python run_server.py
# –ø—Ä–æ–≤–µ—Ä–∫–∞
curl http://localhost:8000/healthz
```

4) (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø—É—Å—Ç–∏—Ç–µ Telegram‚Äë–±–æ—Ç–∞
```bash
python run_telegram_bot.py
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `app/graph/pipeline.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω (LangGraph):
  - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–µ–Ω—å/—ç—Ç–∞–ø, —Å–æ–±–∏—Ä–∞–µ—Ç –ø–∞–º—è—Ç—å, —Å—á–∏—Ç–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ (`BehavioralAnalyzer`) ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `app/utils/behavioral_analyzer.py` ‚Äî –∞–Ω–∞–ª–∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- `app/utils/behavioral_adaptation.py` ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–¥ —ç—Ç–∞–ø—ã (`stage_1..3`) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- `app/utils/time_utils.py` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤—ã
- `app/utils/question_filter.py` ‚Äî –≤—ã—Ä–µ–∑–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã, –µ—Å–ª–∏ –∏—Ö —Å–µ–π—á–∞—Å –∑–∞–¥–∞–≤–∞—Ç—å –Ω–µ–ª—å–∑—è

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –î–∏–∞–ª–æ–≥ —á–µ—Ä–µ–∑ API
curl -X POST http://localhost:8000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"user_id":"u1","messages":[{"role":"user","content":"–ü—Ä–∏–≤–µ—Ç"}]}'

# –¢–µ—Å—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–Ω—É–∂–Ω–æ OPENAI_API_KEY)
python scripts/test_strategy_responses.py

# –¢–µ—Å—Ç—ã
pytest -q
```

## –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å API, –∑–∞—Ç–µ–º –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ –±–æ—Ç–∞
- –ï—Å–ª–∏ –¥–∏–∞–ª–æ–≥–∏ –¥–ª–∏–Ω–Ω—ã–µ ‚Äî –¥–∞–π—Ç–µ –º–æ–¥–µ–ª–∏ –≤—Ä–µ–º—è (—Ç–∞–π–º–∞—É—Ç—ã —É–∂–µ —É–≤–µ–ª–∏—á–µ–Ω—ã)
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–µ—Ä–µ—Ä—ã–≤—ã –Ω–µ —á–∏—Å—Ç–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

## –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥
- –ë–æ—Ç –ø–∏—à–µ—Ç –ø—Ä–æ —Ç–æ–∫–µ–Ω ‚Äî –∑–∞–¥–∞–π—Ç–µ `TELEGRAM_BOT_TOKEN`
- –¢–∞–π–º–∞—É—Ç—ã –Ω–∞ /api/chat ‚Äî —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–µ–∂–ª–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü–∞–º—è—Ç—å ¬´–Ω–µ –ø–æ–º–Ω–∏—Ç¬ª ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `data/chroma_db` –∏ –∫–ª—é—á OpenAI

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–º–∏–Ω–∏–º—É–º –Ω—É–∂–Ω–æ–≥–æ)
```
Agata/
‚îú‚îÄ‚îÄ run_server.py          # API (–ø–æ—Ä—Ç 8000)
‚îú‚îÄ‚îÄ run_telegram_bot.py    # Telegram‚Äë–±–æ—Ç
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ graph/pipeline.py  # –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ ‚Üí –ø—Ä–æ–º–ø—Ç
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ behavioral_analyzer.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ behavioral_adaptation.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ time_utils.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ question_filter.py
‚îÇ   ‚îî‚îÄ‚îÄ memory/            # –ë—É—Ñ–µ—Ä, –≤–µ–∫—Ç–æ—Ä–∞, —Å—É–º–º–∞—Ä–∏
‚îî‚îÄ‚îÄ scripts/
    ‚îî‚îÄ‚îÄ test_strategy_responses.py
```

–ì–æ—Ç–æ–≤–æ. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –ê–≥–∞—Ç–∞ –º–µ–Ω—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ ¬´–ø–æ‚Äë—á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏¬ª.